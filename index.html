<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Shooter</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

```
    .game-container {
        position: relative;
        border: 2px solid #00ffff;
        border-radius: 10px;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
    }
    
    canvas {
        display: block;
        background: radial-gradient(circle at center, #0a0a0a 0%, #000000 100%);
    }
    
    /* Mobile responsive styles */
    @media (max-width: 768px) {
        body {
            padding: 0;
            align-items: flex-start;
        }
        
        .game-container {
            width: 100vw;
            height: 100vh;
            border: none;
            border-radius: 0;
            box-shadow: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        canvas {
            width: 100vw !important;
            height: calc(100vw * 16/9) !important;
            max-height: 100vh;
            object-fit: contain;
        }
    }
    
    .ui {
        position: absolute;
        top: 10px;
        left: 10px;
        color: #00ffff;
        font-size: 18px;
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
    }
    
    .game-over {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        color: #ff4444;
        font-size: 24px;
        text-shadow: 0 0 20px rgba(255, 68, 68, 0.8);
        display: none;
        z-index: 100;
    }
    
    .game-panel {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 100;
        backdrop-filter: blur(5px);
    }
    
    .panel-title {
        font-size: 36px;
        color: #00ffff;
        text-shadow: 0 0 20px rgba(0, 255, 255, 0.8);
        margin-bottom: 20px;
        animation: glow 2s ease-in-out infinite alternate;
    }
    
    .panel-subtitle {
        font-size: 18px;
        color: #888;
        margin-bottom: 30px;
        text-align: center;
        line-height: 1.4;
    }
    
    .game-button {
        background: linear-gradient(45deg, #00ffff, #0088ff);
        border: none;
        color: #000;
        font-family: 'Courier New', monospace;
        font-size: 20px;
        font-weight: bold;
        padding: 15px 40px;
        border-radius: 10px;
        cursor: pointer;
        margin: 10px;
        transition: all 0.3s ease;
        box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
        text-transform: uppercase;
    }
    
    .game-button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 30px rgba(0, 255, 255, 0.6);
        background: linear-gradient(45deg, #00ffff, #44aaff);
    }
    
    .game-button:active {
        transform: scale(0.95);
    }
    
    .game-button.secondary {
        background: linear-gradient(45deg, #666, #888);
        color: #fff;
        box-shadow: 0 0 20px rgba(128, 128, 128, 0.3);
    }
    
    .game-button.secondary:hover {
        background: linear-gradient(45deg, #777, #999);
        box-shadow: 0 0 30px rgba(128, 128, 128, 0.6);
    }
    
    .stats {
        color: #00ffff;
        font-size: 18px;
        margin: 20px 0;
        text-align: center;
    }
    
    .stats div {
        margin: 5px 0;
    }
    
    @keyframes glow {
        from { text-shadow: 0 0 20px rgba(0, 255, 255, 0.8); }
        to { text-shadow: 0 0 30px rgba(0, 255, 255, 1), 0 0 40px rgba(0, 255, 255, 0.8); }
    }
    
    .controls {
        position: absolute;
        bottom: 10px;
        left: 10px;
        color: #888;
        font-size: 12px;
    }
    
    .mobile-controls {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 200px;
        display: none;
        pointer-events: none;
    }
    
    .virtual-joystick {
        position: absolute;
        bottom: 20px;
        left: 20px;
        width: 120px;
        height: 120px;
        border: 2px solid rgba(0, 255, 255, 0.3);
        border-radius: 50%;
        background: rgba(0, 255, 255, 0.1);
        pointer-events: all;
    }
    
    .joystick-knob {
        position: absolute;
        width: 40px;
        height: 40px;
        background: rgba(0, 255, 255, 0.8);
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        transition: all 0.1s ease;
    }
    
    .shoot-button {
        position: absolute;
        bottom: 20px;
        right: 20px;
        width: 80px;
        height: 80px;
        border: 2px solid rgba(255, 255, 0, 0.6);
        border-radius: 50%;
        background: rgba(255, 255, 0, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffff00;
        font-weight: bold;
        pointer-events: all;
        user-select: none;
    }
    
    .shoot-button:active {
        background: rgba(255, 255, 0, 0.4);
        box-shadow: 0 0 15px rgba(255, 255, 0, 0.8);
    }
    
    @media (max-width: 768px) {
        .mobile-controls {
            display: block;
        }
        .controls {
            display: none;
        }
        .game-over {
            font-size: 20px;
        }
        .game-button {
            font-size: 18px;
            padding: 12px 30px;
        }
        .panel-title {
            font-size: 28px;
        }
        .panel-subtitle {
            font-size: 16px;
            padding: 0 20px;
        }
    }
</style>
```

</head>
<body>
    <div class="game-container">
        <canvas id="gameCanvas"></canvas>
        <div class="ui">
            <div>Score: <span id="score">0</span></div>
            <div>Lives: <span id="lives">3</span></div>
        </div>

```
    <!-- Start Screen -->
    <div class="game-panel" id="startPanel">
        <div class="panel-title">SPACE SHOOTER</div>
        <div class="panel-subtitle">
            Destroy enemy ships and survive as long as possible!<br>
            Use WASD or virtual joystick to move, space or fire button to shoot.
        </div>
        <button class="game-button" onclick="startGame()">PLAY GAME</button>
    </div>
    
    <!-- Pause Screen -->
    <div class="game-panel" id="pausePanel" style="display: none;">
        <div class="panel-title">GAME PAUSED</div>
        <div class="panel-subtitle">Take a break and resume when ready!</div>
        <div class="stats">
            <div>Score: <span id="pauseScore">0</span></div>
            <div>Lives: <span id="pauseLives">3</span></div>
        </div>
        <button class="game-button" onclick="resumeGame()">RESUME</button>
        <button class="game-button secondary" onclick="restartFromPause()">RESTART</button>
    </div>
    
    <!-- Game Over Screen -->
    <div class="game-panel" id="gameOverPanel" style="display: none;">
        <div class="panel-title" style="color: #ff4444;">GAME OVER</div>
        <div class="panel-subtitle">Your ship has been destroyed!</div>
        <div class="stats">
            <div>Final Score: <span id="finalScore">0</span></div>
            <div>Enemies Destroyed: <span id="enemiesKilled">0</span></div>
        </div>
        <button class="game-button" onclick="startGame()">PLAY AGAIN</button>
        <button class="game-button secondary" onclick="backToStart()">MAIN MENU</button>
    </div>
    
    <div class="game-over" id="gameOver" style="display: none;">
        <div>GAME OVER</div>
        <div style="font-size: 16px; margin-top: 10px;">Press SPACE to restart</div>
    </div>
    <div class="controls">
        WASD/Arrow Keys: Move | Space: Shoot
    </div>
    <div class="mobile-controls" id="mobileControls">
        <div class="virtual-joystick" id="joystick">
            <div class="joystick-knob" id="joystickKnob"></div>
        </div>
        <div class="shoot-button" id="shootButton">
            FIRE
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Responsive canvas setup
    function setupCanvas() {
        const isMobileDevice = window.innerWidth <= 768;
        
        if (isMobileDevice) {
            // Mobile: 9:16 aspect ratio, full width
            const width = window.innerWidth;
            const height = Math.floor(width * 16 / 9);
            
            // If calculated height exceeds viewport, adjust to fit
            const maxHeight = window.innerHeight;
            if (height > maxHeight) {
                canvas.height = maxHeight;
                canvas.width = Math.floor(maxHeight * 9 / 16);
            } else {
                canvas.width = width;
                canvas.height = height;
            }
        } else {
            // Desktop: fixed size
            canvas.width = 800;
            canvas.height = 600;
        }
        
        return { width: canvas.width, height: canvas.height, isMobile: isMobileDevice };
    }
    
    // Initialize canvas
    const gameSettings = setupCanvas();
    let isMobile = gameSettings.isMobile;
    
    // Game state
    let gameState = 'start'; // 'start', 'playing', 'paused', 'gameOver'
    let score = 0;
    let lives = 3;
    let enemiesKilled = 0;
    
    // Player
    const player = {
        x: canvas.width / 2,
        y: canvas.height - 50,
        width: 20,
        height: 30,
        speed: 5
    };
    
    // Arrays for game objects
    let bullets = [];
    let enemies = [];
    let particles = [];
    let stars = [];
    
    // Input handling
    const keys = {};
    let lastShot = 0;
    const shootCooldown = 150;
    
    // Mobile controls (virtual joystick only)
    let joystickActive = false;
    let joystickCenter = { x: 0, y: 0 };
    let joystickPosition = { x: 0, y: 0 };
    
    // Handle window resize
    window.addEventListener('resize', () => {
        const newSettings = setupCanvas();
        isMobile = newSettings.isMobile;
        
        // Adjust player position to stay within new bounds
        player.x = Math.min(player.x, canvas.width - player.width);
        player.y = Math.min(player.y, canvas.height - player.height);
        
        // Reinitialize mobile controls if needed
        if (isMobile && !joystickInitialized) {
            initMobileControls();
        }
    });
    
    let joystickInitialized = false;
    
    // Create starfield
    for (let i = 0; i < 100; i++) {
        stars.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            speed: Math.random() * 2 + 0.5,
            size: Math.random() * 2
        });
    }
    
    // Event listeners
    document.addEventListener('keydown', (e) => {
        keys[e.code] = true;
        
        // Game state controls
        if (e.code === 'Space') {
            if (gameState === 'start') {
                startGame();
            } else if (gameState === 'gameOver') {
                startGame();
            } else if (gameState === 'playing') {
                // Space is used for shooting in game
            } else if (gameState === 'paused') {
                resumeGame();
            }
            e.preventDefault();
        } else if (e.code === 'Escape' && gameState === 'playing') {
            pauseGame();
            e.preventDefault();
        }
    });
    
    document.addEventListener('keyup', (e) => {
        keys[e.code] = false;
    });
    
    // Mobile touch controls (virtual joystick only)
    function initMobileControls() {
        const joystick = document.getElementById('joystick');
        const joystickKnob = document.getElementById('joystickKnob');
        const shootButton = document.getElementById('shootButton');
        
        // Virtual Joystick
        joystick.addEventListener('touchstart', (e) => {
            e.preventDefault();
            joystickActive = true;
            const rect = joystick.getBoundingClientRect();
            joystickCenter = {
                x: rect.left + rect.width / 2,
                y: rect.top + rect.height / 2
            };
        });
        
        joystick.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!joystickActive) return;
            
            const touch = e.touches[0];
            const dx = touch.clientX - joystickCenter.x;
            const dy = touch.clientY - joystickCenter.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            const maxDistance = 40;
            
            if (distance <= maxDistance) {
                joystickPosition = { x: dx, y: dy };
            } else {
                joystickPosition = {
                    x: (dx / distance) * maxDistance,
                    y: (dy / distance) * maxDistance
                };
            }
            
            joystickKnob.style.transform = `translate(${joystickPosition.x - 20}px, ${joystickPosition.y - 20}px)`;
        });
        
        joystick.addEventListener('touchend', (e) => {
            e.preventDefault();
            joystickActive = false;
            joystickPosition = { x: 0, y: 0 };
            joystickKnob.style.transform = 'translate(-20px, -20px)';
        });
        
        // Shoot button
        shootButton.addEventListener('touchstart', (e) => {
            e.preventDefault();
            if (gameState === 'playing' && Date.now() - lastShot > shootCooldown) {
                createBullet(player.x + player.width / 2 - 1.5, player.y);
                lastShot = Date.now();
            }
        });
    }
    
    // Game state management functions
    function startGame() {
        gameState = 'playing';
        score = 0;
        lives = 3;
        enemiesKilled = 0;
        bullets = [];
        enemies = [];
        particles = [];
        player.x = canvas.width / 2 - player.width / 2;
        player.y = canvas.height - 50;
        
        // Update UI
        document.getElementById('score').textContent = score;
        document.getElementById('lives').textContent = lives;
        
        // Hide all panels
        document.getElementById('startPanel').style.display = 'none';
        document.getElementById('pausePanel').style.display = 'none';
        document.getElementById('gameOverPanel').style.display = 'none';
        document.getElementById('gameOver').style.display = 'none';
    }
    
    function pauseGame() {
        if (gameState !== 'playing') return;
        gameState = 'paused';
        
        // Update pause panel with current stats
        document.getElementById('pauseScore').textContent = score;
        document.getElementById('pauseLives').textContent = lives;
        document.getElementById('pausePanel').style.display = 'flex';
    }
    
    function resumeGame() {
        if (gameState !== 'paused') return;
        gameState = 'playing';
        document.getElementById('pausePanel').style.display = 'none';
    }
    
    function gameOver() {
        gameState = 'gameOver';
        
        // Update game over panel with final stats
        document.getElementById('finalScore').textContent = score;
        document.getElementById('enemiesKilled').textContent = enemiesKilled;
        document.getElementById('gameOverPanel').style.display = 'flex';
    }
    
    function restartFromPause() {
        startGame();
    }
    
    function backToStart() {
        gameState = 'start';
        document.getElementById('gameOverPanel').style.display = 'none';
        document.getElementById('startPanel').style.display = 'flex';
    }
    
    // Particle system
    function createParticles(x, y, count, color) {
        for (let i = 0; i < count; i++) {
            particles.push({
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10,
                life: 30,
                maxLife: 30,
                color: color
            });
        }
    }
    
    // Game objects
    function createBullet(x, y) {
        bullets.push({
            x: x,
            y: y,
            width: 3,
            height: 10,
            speed: 8
        });
    }
    
    function createEnemy() {
        enemies.push({
            x: Math.random() * (canvas.width - 30),
            y: -30,
            width: 25,
            height: 25,
            speed: Math.random() * 3 + 1,
            health: 1
        });
    }
    
    // Update functions
    function updatePlayer() {
        if (gameState !== 'playing') return;
        
        let moveX = 0, moveY = 0;
        
        // Desktop keyboard controls
        if ((keys['KeyA'] || keys['ArrowLeft'])) moveX -= player.speed;
        if ((keys['KeyD'] || keys['ArrowRight'])) moveX += player.speed;
        if ((keys['KeyW'] || keys['ArrowUp'])) moveY -= player.speed;
        if ((keys['KeyS'] || keys['ArrowDown'])) moveY += player.speed;
        
        // Mobile joystick controls
        if (isMobile && joystickActive) {
            moveX += (joystickPosition.x / 40) * player.speed;
            moveY += (joystickPosition.y / 40) * player.speed;
        }
        
        // Apply movement
        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x + moveX));
        player.y = Math.max(0, Math.min(canvas.height - player.height, player.y + moveY));
        
        // Desktop shooting
        if (keys['Space'] && Date.now() - lastShot > shootCooldown) {
            createBullet(player.x + player.width / 2 - 1.5, player.y);
            lastShot = Date.now();
        }
    }
    
    function updateBullets() {
        for (let i = bullets.length - 1; i >= 0; i--) {
            bullets[i].y -= bullets[i].speed;
            
            if (bullets[i].y < 0) {
                bullets.splice(i, 1);
            }
        }
    }
    
    function updateEnemies() {
        for (let i = enemies.length - 1; i >= 0; i--) {
            enemies[i].y += enemies[i].speed;
            
            if (enemies[i].y > canvas.height) {
                enemies.splice(i, 1);
                continue;
            }
            
            // Check collision with player
            if (enemies[i].x < player.x + player.width &&
                enemies[i].x + enemies[i].width > player.x &&
                enemies[i].y < player.y + player.height &&
                enemies[i].y + enemies[i].height > player.y) {
                
                createParticles(enemies[i].x + enemies[i].width/2, enemies[i].y + enemies[i].height/2, 8, '#ff4444');
                enemies.splice(i, 1);
                lives--;
                
                if (lives <= 0) {
                    gameOver();
                }
                
                document.getElementById('lives').textContent = lives;
                continue;
            }
            
            // Check collision with bullets
            for (let j = bullets.length - 1; j >= 0; j--) {
                if (bullets[j].x < enemies[i].x + enemies[i].width &&
                    bullets[j].x + bullets[j].width > enemies[i].x &&
                    bullets[j].y < enemies[i].y + enemies[i].height &&
                    bullets[j].y + bullets[j].height > enemies[i].y) {
                    
                    createParticles(enemies[i].x + enemies[i].width/2, enemies[i].y + enemies[i].height/2, 6, '#00ffff');
                    bullets.splice(j, 1);
                    enemies.splice(i, 1);
                    enemiesKilled++;
                    score += 10;
                    document.getElementById('score').textContent = score;
                    break;
                }
            }
        }
    }
    
    function updateParticles() {
        for (let i = particles.length - 1; i >= 0; i--) {
            let p = particles[i];
            p.x += p.vx;
            p.y += p.vy;
            p.life--;
            p.vx *= 0.98;
            p.vy *= 0.98;
            
            if (p.life <= 0) {
                particles.splice(i, 1);
            }
        }
    }
    
    function updateStars() {
        for (let star of stars) {
            star.y += star.speed;
            if (star.y > canvas.height) {
                star.y = 0;
                star.x = Math.random() * canvas.width;
            }
        }
    }
    
    // Render functions
    function drawPlayer() {
        ctx.fillStyle = '#00ffff';
        ctx.fillRect(player.x, player.y, player.width, player.height);
        
        // Ship glow
        ctx.shadowColor = '#00ffff';
        ctx.shadowBlur = 10;
        ctx.fillRect(player.x, player.y, player.width, player.height);
        ctx.shadowBlur = 0;
        
        // Ship details
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(player.x + player.width/2 - 1, player.y, 2, player.height);
    }
    
    function drawBullets() {
        ctx.fillStyle = '#ffff00';
        ctx.shadowColor = '#ffff00';
        ctx.shadowBlur = 5;
        
        for (let bullet of bullets) {
            ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
        }
        ctx.shadowBlur = 0;
    }
    
    function drawEnemies() {
        ctx.fillStyle = '#ff4444';
        ctx.shadowColor = '#ff4444';
        ctx.shadowBlur = 8;
        
        for (let enemy of enemies) {
            ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
        }
        ctx.shadowBlur = 0;
    }
    
    function drawParticles() {
        for (let p of particles) {
            let alpha = p.life / p.maxLife;
            ctx.fillStyle = p.color + Math.floor(alpha * 255).toString(16).padStart(2, '0');
            ctx.fillRect(p.x, p.y, 2, 2);
        }
    }
    
    function drawStars() {
        ctx.fillStyle = '#ffffff';
        for (let star of stars) {
            ctx.fillRect(star.x, star.y, star.size, star.size);
        }
    }
    
    function render() {
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Draw everything
        drawStars();
        drawPlayer();
        drawBullets();
        drawEnemies();
        drawParticles();
    }
    
    function update() {
        if (gameState === 'playing') {
            updatePlayer();
            updateBullets();
            updateEnemies();
            updateParticles();
            
            // Spawn enemies
            if (Math.random() < 0.02) {
                createEnemy();
            }
        }
        
        updateStars();
        render();
        requestAnimationFrame(update);
    }
    
    function restartGame() {
        startGame();
    }
    
    // Initialize mobile controls only on mobile
    if (isMobile) {
        initMobileControls();
        joystickInitialized = true;
    }
    
    // Start the game loop
    update();
</script>
```

</body>
</html>